import { menuCategories } from "@/data/menuData";

// Image imports
import sogukIcecekler from "@/assets/soguk-icecekler.jpg";
import milkshake from "@/assets/milkshake.jpg";
import frozen from "@/assets/frozen.jpg";
import sicakIcecekler from "@/assets/sicak-icecekler.jpg";
import tavukYemekleri from "@/assets/tavuk-yemekleri.jpg";
import makarnalar from "@/assets/makarnalar.jpg";
import aparatifler from "@/assets/aparatifler.jpg";

const categoryImageMap: Record<string, string> = {
  "soguk-icecekler": sogukIcecekler,
  "milkshake": milkshake,
  "frozen": frozen,
  "sicak-icecekler": sicakIcecekler,
  "tavuk-yemekleri": tavukYemekleri,
  "makarnalar": makarnalar,
  "aparatifler": aparatifler,
};

interface CategoryNavProps {
  activeCategory: string | null;
  onCategoryClick: (categoryId: string) => void;
}

const CategoryNav = ({ activeCategory, onCategoryClick }: CategoryNavProps) => {
  const allCategories = menuCategories.map((c) => ({ id: c.id, title: c.title, icon: c.icon }));

  return (
    <nav className="sticky top-0 z-50 bg-background/95 backdrop-blur-lg border-b border-border/50 py-6 px-4">
      <div className="max-w-7xl mx-auto">
        {/* Category Grid */}
        <div className="grid grid-cols-4 md:grid-cols-8 gap-3 md:gap-4">
          {allCategories.map((category) => (
            <button
              key={category.id}
              onClick={() => onCategoryClick(category.id)}
              className={`group relative flex flex-col items-center gap-2 p-2 rounded-xl transition-all duration-300 ${
                activeCategory === category.id
                  ? "ring-2 ring-primary glow-gold"
                  : "hover:ring-2 hover:ring-primary/50"
              }`}
            >
              {/* Category Image */}
              <div className="relative w-full aspect-square rounded-lg overflow-hidden">
                <img
                  src={categoryImageMap[category.id]}
                  alt={category.title}
                  className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                />
                <div className={`absolute inset-0 transition-all duration-300 ${
                  activeCategory === category.id
                    ? "bg-primary/20"
                    : "bg-gradient-to-t from-black/60 via-black/20 to-transparent group-hover:from-primary/30"
                }`} />
                {/* Icon overlay */}
                <span className="absolute bottom-1 right-1 text-lg md:text-xl opacity-80">
                  {category.icon}
                </span>
              </div>
              
              {/* Category Title */}
              <span className={`text-xs md:text-sm font-medium text-center leading-tight transition-colors line-clamp-2 ${
                activeCategory === category.id
                  ? "text-primary"
                  : "text-foreground/80 group-hover:text-primary"
              }`}>
                {category.title}
              </span>
            </button>
          ))}
        </div>
      </div>
    </nav>
  );
};

export default CategoryNav;
export interface MenuItem {
  name: string;
  price: number;
}

export interface MenuCategory {
  id: string;
  title: string;
  icon: string;
  image: string;
  items: MenuItem[];
}

export const menuCategories: MenuCategory[] = [
  {
    id: "soguk-icecekler",
    title: "Soƒüuk ƒ∞√ßecekler",
    icon: "üßä",
    image: "soguk-icecekler",
    items: [
      { name: "Kutu Kola", price: 100 },
      { name: "≈ûi≈üe Kola", price: 95 },
      { name: "Meyve Suyu", price: 100 },
      { name: "Meyveli Soda", price: 85 },
      { name: "Fuse Tea", price: 100 },
      { name: "Su", price: 30 },
      { name: "Gazoz", price: 100 },
      { name: "Limonata", price: 100 },
      { name: "Sprite", price: 100 },
      { name: "Ayran", price: 85 },
      { name: "Churchill", price: 140 },
    ],
  },
  {
    id: "milkshake",
    title: "Milkshake",
    icon: "ü•§",
    image: "milkshake",
    items: [
      { name: "√áilekli", price: 150 },
      { name: "√áikolatalƒ±", price: 150 },
      { name: "Karadutlu", price: 150 },
      { name: "Muzlu", price: 150 },
    ],
  },
  {
    id: "frozen",
    title: "Frozen",
    icon: "üçπ",
    image: "frozen",
    items: [
      { name: "√áilekli", price: 150 },
      { name: "Kivili", price: 150 },
      { name: "Karpuzlu", price: 150 },
      { name: "Muzlu", price: 150 },
    ],
  },
  {
    id: "sicak-icecekler",
    title: "Sƒ±cak ƒ∞√ßecekler",
    icon: "‚òï",
    image: "sicak-icecekler",
    items: [
      { name: "T√ºrk Kahvesi", price: 100 },
      { name: "S√ºtl√º T√ºrk Kahvesi", price: 110 },
      { name: "Dibek Kahvesi", price: 100 },
      { name: "Menengi√ß Kahvesi", price: 130 },
      { name: "Damla Sakƒ±zlƒ± T√ºrk K.", price: 110 },
      { name: "Daƒü √áilekli T√ºrk K.", price: 120 },
      { name: "Filtre Kahve", price: 130 },
      { name: "S√ºtl√º Filtre Kahve", price: 150 },
      { name: "Cappuccino", price: 100 },
      { name: "Sƒ±cak √áikolata", price: 130 },
      { name: "Salep", price: 130 },
      { name: "√áay", price: 25 },
      { name: "Bitki √áayƒ±", price: 50 },
      { name: "Bitki Demleme √áayƒ±", price: 140 },
      { name: "Nescafe Gold", price: 100 },
      { name: "Hazƒ±r Nescafe", price: 90 },
      { name: "S√ºtl√º Nescafe", price: 110 },
      { name: "S√ºt", price: 90 },
      { name: "Ballƒ± S√ºt", price: 130 },
    ],
  },
  {
    id: "tavuk-yemekleri",
    title: "Tavuk Yemekleri",
    icon: "üçó",
    image: "tavuk-yemekleri",
    items: [
      { name: "K√∂ri Soslu Tavuk", price: 300 },
      { name: "Mexican Soslu Tavuk", price: 300 },
      { name: "Soya Soslu Tavuk", price: 300 },
      { name: "Kremalƒ± Mantarlƒ± Tavuk", price: 300 },
      { name: "Tavuk Kavurma", price: 300 },
      { name: "Kremitte Tavuk Sote", price: 300 },
      { name: "Tavuk √á√∂kertme", price: 300 },
      { name: "Tavuk Fajita", price: 300 },
      { name: "Barbek√º Soslu Tavuk", price: 300 },
      { name: "Tavuk Bonfile", price: 300 },
      { name: "Tavuk ≈ûinitzel", price: 300 },
      { name: "Tavuk Sote", price: 300 },
    ],
  },
  {
    id: "makarnalar",
    title: "Makarnalar",
    icon: "üçù",
    image: "makarnalar",
    items: [
      { name: "Penne Alfredo Fettuccine", price: 300 },
      { name: "Etli Penne Arabiat", price: 300 },
      { name: "Spagetti A. Fettuccine", price: 300 },
      { name: "Spagetti Bolonez", price: 300 },
      { name: "Mantƒ± Pesto Soslu", price: 300 },
    ],
  },
  {
    id: "aparatifler",
    title: "Aparatifler",
    icon: "üç≥",
    image: "aparatifler",
    items: [
      { name: "Kavurmalƒ± Menemen", price: 300 },
      { name: "Karƒ±≈üƒ±k Menemen", price: 200 },
      { name: "Ka≈üarlƒ± G√∂zleme", price: 200 },
      { name: "Karƒ±≈üƒ±k Tost", price: 200 },
      { name: "Patates Cips", price: 120 },
    ],
  },
];

// Image imports map
export const categoryImages: Record<string, string> = {
  "soguk-icecekler": "/src/assets/soguk-icecekler.jpg",
  "milkshake": "/src/assets/milkshake.jpg",
  "frozen": "/src/assets/frozen.jpg",
  "sicak-icecekler": "/src/assets/sicak-icecekler.jpg",
  "tavuk-yemekleri": "/src/assets/tavuk-yemekleri.jpg",
  "makarnalar": "/src/assets/makarnalar.jpg",
  "aparatifler": "/src/assets/aparatifler.jpg",
};
import { useState, useRef, useCallback } from "react";
import MenuHeader from "@/components/MenuHeader";
import CategoryNav from "@/components/CategoryNav";
import MenuCategory from "@/components/MenuCategory";
import Footer from "@/components/Footer";
import { menuCategories } from "@/data/menuData";

const Index = () => {
  const [activeCategory, setActiveCategory] = useState<string | null>(null);
  const categoryRefs = useRef<{ [key: string]: HTMLDivElement | null }>({});

  const handleCategoryClick = useCallback((categoryId: string) => {
    setActiveCategory(categoryId);
    const element = categoryRefs.current[categoryId];
    if (element) {
      const navHeight = 200;
      const elementPosition = element.getBoundingClientRect().top + window.scrollY;
      window.scrollTo({
        top: elementPosition - navHeight,
        behavior: "smooth",
      });
    }
  }, []);

  return (
    <div className="min-h-screen bg-background">
      {/* Header */}
      <MenuHeader />

      {/* Navigation with Images */}
      <CategoryNav activeCategory={activeCategory} onCategoryClick={handleCategoryClick} />

      {/* Menu Content */}
      <main className="max-w-6xl mx-auto px-4 py-8">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {menuCategories.map((category, index) => (
            <div
              key={category.id}
              ref={(el) => (categoryRefs.current[category.id] = el)}
            >
              <MenuCategory category={category} index={index} />
            </div>
          ))}
        </div>
      </main>

      {/* Footer */}
      <Footer />
    </div>
  );
};

export default Index;
